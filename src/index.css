@tailwind base;
@tailwind components;
@tailwind utilities;

/*
Design system:
- Use CSS variables (HSL) + Tailwind tokens (bg-background, text-foreground, etc.)
- Only two themes are supported: light (:root) and dark (.dark on <html>).
*/

@layer base {
  :root {
    /* Core surface tokens */
    --background: 210 20% 98%;
    --foreground: 210 12% 16%;

    --card: 0 0% 100%;
    --card-foreground: 210 12% 16%;

    --popover: 0 0% 100%;
    --popover-foreground: 210 12% 16%;

    /* Brand */
    --primary: 214 84% 42%;
    --primary-foreground: 0 0% 100%;
    --primary-light: 214 84% 60%;
    --primary-dark: 214 84% 28%;

    --secondary: 204 39% 41%;
    --secondary-foreground: 0 0% 100%;

    --muted: 210 20% 94%;
    --muted-foreground: 210 12% 45%;

    --accent: 183 84% 39%;
    --accent-foreground: 0 0% 100%;

    /* Semantic */
    --info: 214 84% 42%;
    --info-foreground: 0 0% 100%;
    --info-muted: 214 84% 95%;
    --info-muted-foreground: 214 84% 30%;

    --destructive: 0 84% 60%;
    --destructive-foreground: 0 0% 100%;

    --warning: 43 96% 56%;
    --warning-foreground: 0 0% 15%;

    --success: 142 71% 45%;
    --success-foreground: 0 0% 100%;

    /* Controls */
    --border: 214 32% 91%;
    --input: 214 32% 91%;
    --ring: 214 84% 42%;

    --radius: 0.75rem;

    /* Optional sidebar tokens (used by some shadcn components) */
    --sidebar-background: 0 0% 98%;
    --sidebar-foreground: 240 5.3% 26.1%;
    --sidebar-primary: 240 5.9% 10%;
    --sidebar-primary-foreground: 0 0% 98%;
    --sidebar-accent: 240 4.8% 95.9%;
    --sidebar-accent-foreground: 240 5.9% 10%;
    --sidebar-border: 220 13% 91%;
    --sidebar-ring: 217.2 91.2% 59.8%;

    /* Density tokens */
    --density-scale: 1;
    --control-height-base: 2.5rem;
    --control-padding-x-base: 1rem;
    --control-padding-y-base: 0.5rem;
    --card-padding-base: 1.5rem;
    --tabs-list-height-base: 2.5rem;

    --control-height: calc(var(--control-height-base) * var(--density-scale));
    --control-padding-x: calc(var(--control-padding-x-base) * var(--density-scale));
    --control-padding-y: calc(var(--control-padding-y-base) * var(--density-scale));
    --card-padding: calc(var(--card-padding-base) * var(--density-scale));
    --tabs-list-height: calc(var(--tabs-list-height-base) * var(--density-scale));
  }

  .dark {
    /* Navy dark theme */
    --background: 220 45% 6%;
    --foreground: 210 20% 95%;

    --card: 220 50% 10%;
    --card-foreground: 210 20% 95%;

    --popover: 220 50% 10%;
    --popover-foreground: 210 20% 95%;

    --primary: 214 84% 60%;
    --primary-foreground: 220 45% 6%;
    --primary-light: 214 84% 70%;
    --primary-dark: 214 84% 40%;

    --secondary: 220 55% 18%;
    --secondary-foreground: 0 0% 100%;

    --muted: 220 50% 14%;
    --muted-foreground: 210 20% 70%;

    --accent: 214 84% 55%;
    --accent-foreground: 0 0% 100%;

    --info: 214 84% 60%;
    --info-foreground: 0 0% 100%;
    --info-muted: 220 50% 18%;
    --info-muted-foreground: 214 84% 70%;

    --destructive: 0 84% 60%;
    --destructive-foreground: 0 0% 100%;

    --warning: 43 96% 56%;
    --warning-foreground: 0 0% 15%;

    --success: 142 71% 45%;
    --success-foreground: 0 0% 100%;

    --border: 220 50% 18%;
    --input: 220 50% 18%;
    --ring: 214 84% 60%;

    --sidebar-background: 220 50% 8%;
    --sidebar-foreground: 210 20% 95%;
    --sidebar-primary: 214 84% 55%;
    --sidebar-primary-foreground: 0 0% 100%;
    --sidebar-accent: 220 50% 14%;
    --sidebar-accent-foreground: 210 20% 95%;
    --sidebar-border: 220 50% 16%;
    --sidebar-ring: 214 84% 60%;
  }

  * {
    @apply border-border;
  }

  html,
  body {
    width: 100%;
    max-width: 100%;
  }

  body {
    @apply bg-background text-foreground;
  }
}

/* Ensure app root never expands viewport horizontally */
#root {
  width: 100%;
  max-width: 100%;
}

/* Global compact density mode */
.density-compact {
  --density-scale: 0.85;
}

/* Shared animation utilities (theme-agnostic) */
@keyframes glowPulse {
  0%, 100% {
    filter: drop-shadow(0 0 3px hsl(var(--primary))) drop-shadow(0 0 10px hsl(var(--primary) / 0.4));
  }
  50% {
    filter: drop-shadow(0 0 6px hsl(var(--primary))) drop-shadow(0 0 16px hsl(var(--primary) / 0.55));
  }
}

@keyframes floatUp {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-8px); }
}

.animate-glow {
  animation: glowPulse 2s ease-in-out infinite;
}

.animate-float {
  animation: floatUp 3s ease-in-out infinite;
}

/* Glassmorphism Widget Styles */
.glass-widget {
  background: linear-gradient(135deg, hsl(var(--card) / 0.72) 0%, hsl(var(--background) / 0.55) 100%);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid hsl(var(--border) / 0.35);
  box-shadow:
    0 8px 32px -8px hsl(var(--primary) / 0.12),
    inset 0 1px 0 hsl(var(--foreground) / 0.04);
}

.glass-widget-hover {
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.glass-widget-hover:hover {
  background: linear-gradient(135deg, hsl(var(--card) / 0.82) 0%, hsl(var(--background) / 0.62) 100%);
  box-shadow:
    0 12px 40px -10px hsl(var(--primary) / 0.18),
    inset 0 1px 0 hsl(var(--foreground) / 0.06);
  transform: translateY(-2px) scale(1.02);
}

/* Mobile Safe Area Support */
.safe-area-inset {
  padding-top: env(safe-area-inset-top);
  padding-bottom: env(safe-area-inset-bottom);
  padding-left: env(safe-area-inset-left);
  padding-right: env(safe-area-inset-right);
}

/* Hide scrollbars utility */
.no-scrollbar::-webkit-scrollbar { display: none; }
.no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

/* 3D Sextant Container */
.sextant-3d-container {
  perspective: 1000px;
  perspective-origin: center center;
  transform-style: preserve-3d;
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 100%;
  height: 100%;
  overflow: visible;
}

.sextant-3d {
  position: relative;
  transform-style: preserve-3d;
  width: 100%;
  height: 100%;
  display: grid;
  place-items: center;
}

.sextant-3d__layer {
  position: absolute;
  top: 50%;
  left: 50%;
  transform-origin: center center;
  transform-style: preserve-3d;
  width: 100%;
  height: 100%;
  object-fit: contain;
  pointer-events: none;
  margin-top: -50%;
  margin-left: -50%;
}

.sextant-3d__glow {
  position: absolute;
  top: 50%;
  left: 50%;
  width: 110%;
  height: 110%;
  transform: translate(-50%, -50%);
  background: radial-gradient(circle, hsl(45 100% 70% / 0.12) 0%, transparent 70%);
  border-radius: 50%;
  pointer-events: none;
}

